<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise的静态方法</title>
</head>
<body>
    
</body>
<script>
    /*
    //resolve方法
    const p1 = new Promise((resolve,reject) => {
        setTimeout(()=>{
            resolve('ok')
        })
    })
    p1.then((data)=>{
        console.log(data);
    })
    //reject方法

   */

   
    //all方法
    const getImagePromise = (src)=>new Promise((resolve,reject)=>{
    //有异步处理逻辑
    const img = new Image()
    img.onload = function(){
        resolve(src+' img loaded success!')
    }
    img.onerror = function(){
        reject(src + ' img loaded error!')
    }
    img.src = src
})

const promises = ['./img/1.jpg','./img/2.jpg','./img/3x.jpg','./img/4.jpg'].map(src=>getImagePromise(src))

const p = Promise.all(promises)

p
.then(data=>{
    console.log(data)
})
.catch(err=>{
    console.log(err)
})
</script>
</html>